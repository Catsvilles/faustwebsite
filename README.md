# Faust Website

This repository contains the source of the Faust website which is currently deployed at <https://faust.grame.fr>.

## Organization

The website uses [Bootstrap](https://getbootstrap.com/) (which is dynamically included in all pages). Beside that, the site is completely static and is generated by running the `build` script. Running `build` will generate a `/site` folder containing the site. This folder can be deployed anywhere.

* `/css`: contains all the CSS files (mostly overriding some bootstrap classes)
    * `/css/faust-widgets.css`: the CSS for the Faust widget used in the documentation.
    * `/css/faust.css`: the main CSS of the website.
* `/lib`: contains the html source code of the headers, footers and navigation bars
    * `/lib/footer-content.html`: the content of the footer (e.g., extra navigation links, etc.).
    * `/lib/footer-includes.html`: any includes to be placed in the footer (mostly JS scripts).
    * `/lib/header-includes.html`: any includes to be placed in the header (e.g., CSS, scripts, etc.).
    * `/lib/navigation.html`: the source of the nav bar of the website.
    * `/lib/std-header.html`: the source of the header.
* `/script`: shell scripts called to generate the various parts of the website.
    * `buildtuto`: the script is used to build tutorial pages containing a scrollable table of content on the left side of the page and interactive Fauts examples.
* `/src`: the source code of the website.
* `build`: the script to call to build the website.
* `config`: this script contains the definition of a few global variables used to configure de generated website (e.g., domain name, target folder, etc.)
* `deploy`: this script synchronizes the default `site` folder with the target server.

## Generating the Website

The `build` script can be called to generate the website (in `site` by default).

When generating the website for the first time, you should should run:

```
./build -a
```

This will create the target folder (`site` by default) and run all other potential build scripts. To get, the details of the build steps, the `-v` option can be used:

```
./build -a -v
```

Running `build` without the `-a` option will simply update the target folder with the current state of the content of `src`, which means that tutorial pages wont be rebuilt (see next section). 

Finally, the `-d` option allows us to specify the name of the target domain (i.e., `https://faust.grame.fr` by default). This can also be done by overriding `config`.

## Content Types

There are 3 types of pages on the Faust website: markdown pages, HTML pages, and tutorial pages.

### Markdown Pages

Markdown pages are written in markdown. Their corresponding `html` code is generated when the main `build` script is called (even without the `-a` option).

### HTML Pages

HTML pages are pieces of HTML code without a footer and a header containing the content of the page. Headers and footers are automatically added when running the main `build` script (even without the `-a` option).

### Tutorial Pages

Tutorial pages are more complex. They are based on a series of markdown files that are automatically indexed in a table of content placed on the left side of the page. They are generated by their own local `build` script that is called when the `-a` is provided to the main `build` script. 

Tutorials pages can contain interactive Faust examples. Those are declared directly in the markdown file using this syntax:

    <!-- faust-run -->
    ```
    process = +;
    ```
    <!-- /faust-run -->

They will then appear in the corresponding HTML page as a Faust block diagram followed by its code and a "Run" button linking the Faust code to the Faust online editor.

## Dependencies

* `pandoc` (>= 2.3)
* The Faust website relies on various git sub-modules that should be cloned with this repository (i.e., `git clone --recursive [...]`).
* Also, in order for the example page to build properly, the main `faust` repository (<https://github.com/grame-cncm/faust>) should be placed in the same parent folder as this repository. 

## Contributing

### Adding New Pages

New pages should respect the strict hierarchy of the Faust website. In order for them to be taken into account, they should be added to the main `build` script. They should also be added to the navigation bar by modifying `lib/navigation.html`.

### Markdown and HTML Pages

Write new content in the current page and then run the main `build` script to reflect the update on the generated website.

### Tutorial Pages

Write new content and then either run the local `build` script and then the main one (without the `-a` option) or just run the main `build` script with the `-a` option. This last option is much slower since it will call all the local `build` script of the website.

### News

News should be added directly to `src/main.html` with a link to a longer article/version to one of the pages on the website to a section of `src/community/news`.

### Deploy

If using the Faust server, just run `./deploy` to synchronise the `site` folder with the `~/www` one.
